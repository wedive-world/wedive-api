version: '3.8'

services: 
  api:
    container_name: api
    build:
      context: .
      dockerfile: ./Dockerfile
    image: wedive/api
    ports: 
      - "4000:4000"
    restart: unless-stopped
    env_file: 
      - wedive-secret/aws-secret.env
      - wedive-secret/db-config.env
      - wedive-secret/s3-config.env
    networks: 
      - api-network
      - mongodb-network
      
networks:
  api-network:
    driver: bridge
    name: api-network

  mongodb-network:
    external: true