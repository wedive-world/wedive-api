{
  "version": 0,
  "Resources": [
    {
      "TargetService": {
        "Type": "AWS::ECS::Service",
        "Properties": {
          "TaskDefinition": "arn:aws:ecs:ap-northeast-2:681728264552:task-definition/wedive-api:latest",
          "LoadBalancerInfo": {
            "ContainerName": "wedive-api",
            "ContainerPort": 4000:4000
          },
          "PlatformVersion": "1.4.0",
          "NetworkConfiguration": {
            "AwsvpcConfiguration": {
              "Subnets": [
                "subnet-06e9b84648af72404",
                "subnet-0484581bb2bed3aeb"
              ],
              "SecurityGroups": [
                "sg-0b07385d3e7beef00"
              ],
              "AssignPublicIp": "DISABLED"
            }
          },
          "CapacityProviderStrategy": [
            {
              "Base": 1,
              "CapacityProvider": "FARGATE_SPOT",
              "Weight": 2
            },
            {
              "Base": 0,
              "CapacityProvider": "FARGATE",
              "Weight": 1
            }
          ]
        }
      }
    }
  ],
  "Hooks": [
    {
      "BeforeInstall": "LambdaFunctionToValidateBeforeInstall"
    },
    {
      "AfterInstall": "LambdaFunctionToValidateAfterInstall"
    },
    {
      "AfterAllowTestTraffic": "LambdaFunctionToValidateAfterTestTrafficStarts"
    },
    {
      "BeforeAllowTraffic": "LambdaFunctionToValidateBeforeAllowingProductionTraffic"
    },
    {
      "AfterAllowTraffic": "LambdaFunctionToValidateAfterAllowingProductionTraffic"
    }
  ]
}
